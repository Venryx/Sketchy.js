<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Sketchy.js Test Cases</title>
		<link rel="stylesheet" href="style.css">

    	<script type="text/javascript" src="canvg.js"></script>
		<script type="text/javascript" src="rgbcolor.js"></script>

		<script src="json2.js"></script>
		<!-- The // notation will not work well locally on the file:// protocol, so the local fallback will be used. -->
		<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
		<script>window.jQuery || document.write('<script src="jquery-1.9.1.min.js"><\/script>')</script>
		<!-- jQuery Migrate must be used... see my bug report:
				https://github.com/ianli/raphael-sketchpad/issues/15 -->
		<script src="jquery-migrate-1.1.1.min.js"></script>
		<script src="raphael-min.js"></script>
		<script src="raphael.sketchpad.js"></script>
		<script src="../sketchy.js"></script>
		<script type="text/javascript">
			$(document).ready(function() { // FYI, "$(function(){" is an alias to this line
				var sketchpad_editor_1 = Raphael.sketchpad("sketchpad_editor_1", {
															width: 300,
															height: 300,
															editing: true // default
											});
				sketchpad_editor_1.change(function() {
											$("#input1").val(sketchpad_editor_1.json());
											});
				var sketchpad_editor_2 = Raphael.sketchpad("sketchpad_editor_2", {
															width: 300,
															height: 300,
															editing: true // default
											});
				sketchpad_editor_2.change(function() {
											$("#input2").val(sketchpad_editor_2.json());
											});
				// Test Functions
				$("#buttonConvertSVGtoPointArrays").click(function() {
					var result, i;
					result = Sketchy.convertSVGtoPointArrays(sketchpad_editor_1.json());
					console.log("convertSVGtoPointArrays result: ");
					console.log(result);
				});
				$("#buttonConvertsvgJSPNtosvgXML").click(function() {
					var context = document.getElementById('canvas').getContext; 
					var result;
					result = Sketchy.convertSVGtoXML(sketchpad_editor_1.json());
					alert(result);
					var c = document.getElementById('canvas');
					c.width = 300;
					c.height = 300;
					if (context)
						c.getContext = context;
					canvg(c, result.toString());
				});
			});
		</script>
	</head>
	<body>
		<div id="container">
			<h2>Sketchy.js Test Cases</h2>
			<p>
				This file is for developers to implement unit tests on JavaScript functions.<br />
				<strong>Note:</strong> Output may be logged to the console.
			</p>
			<div class="sketchcontainer">
				<!-- Sketch box 1 -->
				<em>Sketch 1 Editor</em>
				<div id="sketchpad_editor_1" class="sketchpad"></div>
				<br />
				<!-- Data viewer 1 -->
				<em>Sketch 1 Data</em>
				<form action="" method="post" onsubmit="return false;">
					<textarea id="input1" name="input1" class="databox"></textarea>
				</form>
			</div><!--.sketchcontainer-->

			<div class="sketchcontainer">
				<!-- Sketch box 2 -->
				<em>Sketch 2 Editor</em>
				<div id="sketchpad_editor_2" class="sketchpad"></div>
				<br />
				<!-- Data viewer 2 -->
				<em>Sketch 2 Data</em>
				<form action="" method="post" onsubmit="return false;">
					<textarea id="input2" name="input2" class="databox"></textarea>
				</form>
			</div><!--.sketchcontainer-->
			<div style="clear:both;"></div>
			<br />
			<h3>convertSVGtoPointArrays(json)</h3>
			<!-- See the jQuery action above -->
			<p><input type="button" id="buttonConvertSVGtoPointArrays" value="Test on Sketch 1"></input></p>
			
			<h3>Convert svgJSON to svgXML</h3>
			<p><input type="button" id="buttonConvertsvgJSPNtosvgXML" value="Test on Sketch 1"></input></p>

			<h3>SVGtoImage</h3>
			<div style="border: 1px solid gray; width: 300px; height: 300px;">
			<canvas id="canvas" width="300px" height="300px"></canvas>
			</div>
		</div><!--#container-->
	</body>
</html>
