

<!DOCTYPE html>
<html>

<head>
  <meta charset='utf-8' />
  <meta http-equiv="X-UA-Compatible" content="chrome=1" />
  <meta name="description" content="Sketchy.js: " />

  <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">
  <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/styles.css">
  <script src="json2.js"></script>
  <!-- The // notation will not work well locally on the file:// protocol, so the local fallback will be used. -->
 <!--<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>-->
  <script>window.jQuery || document.write('<script src="jquery-1.9.1.min.js"><\/script>')</script>
		<!-- jQuery Migrate must be used... see my bug report:
    https://github.com/ianli/raphael-sketchpad/issues/15 -->
    <script src="jquery-migrate-1.1.1.min.js"></script>
    <script src="raphael-min.js"></script>
    <script src="raphael.sketchpad.js"></script>
    <script src="simplified_dataset.js"></script>

    <script type="text/javascript">
			$(document).ready(function() { // FYI, "$(function(){" is an alias to this line


        //////////////////
        //  Tab Control
        ///////////////////

        //set the first demo to be displayed
        demoNum = "3"  //change this back to 1 when done

        //display the first demo by default
        $('#demo_' + demoNum).show();
        $('#tab_' + demoNum).addClass('tab_active');

        //make the tabs clickable
        $('.tab').click(function(){
          var id = "#demo_" + $(this).attr('id').split("_")[1];
          
          //update tabs
          $('.tab').removeClass('tab_active');
          $(this).addClass("tab_active");
          
          //update demo containers
          //$(".demo").slideUp(); //these animations are tentative, maybe flash white, then fade in the new content ... idk
         // alert(id + "\n" + $(this).attr('id'))
          $(".demo").each(function(){
            if(id.split("_")[1] != $(this).attr('id').split("_")[1])
              $(this).hide();
          });
         // $('#demo_' + demoNum).offset().left - $(this).offset().left + $(this).width()
          $(id).slideDown();
        });


        //set up the first demo
        initDemo1();

        //set up the second demo
        initDemo2();

        //set up the third demo
        initDemo3();

        //set up the fourth demo
        initDemo4();

      });

      /////////////////////
      // Demo 1  - Character recognition
      /////////////////////
      function initDemo1(){
          //initialize editor 1
          var sketchpad_editor_obj_1= Raphael.sketchpad("demo_1_sketchpad_editor", {
              width: 200,
              height: 200,
              editing: true // default
          });


          sketchpad_editor_obj_1.change(function() {
                //generate a random percent based on the json data
                jsontext = sketchpad_editor_obj_1.json();
                rand = Math.random(jsontext);
                percent = Math.round(rand*10000)/100
                percentStr = percent +"%"

                //get a random character
                randInd = Math.floor(Math.random() * (ALL_LETTERS_KEYS.length - 1 + 1)) + 1;

                //console.log(jsontext)
                if (jsontext == "[]"){
                  percentStr = ""
                  randInd = 0
                }

                //update the fields
                $("#demo_1_result_1").text(percentStr);
                $("#demo_1_res_text_1").html(ALL_LETTERS_KEYS[randInd]);


                //just copy/pasted the above code to apply to the second best match
                //generate a random percent based on the json data
                jsontext = sketchpad_editor_obj_1.json();
                rand = Math.random(jsontext);
                percent = Math.round(rand*10000)/100
                percentStr = percent +"%"

                //get a random character
                randInd = Math.floor(Math.random() * (ALL_LETTERS_KEYS.length - 1 + 1)) + 1;

                //console.log(jsontext)
                if (jsontext == "[]"){
                  percentStr = ""
                  randInd = 0
                }

                //update the fields
                $("#demo_1_result_2").text(percentStr);
                $("#demo_1_res_text_2").html(ALL_LETTERS_KEYS[randInd]);



                best_match = 0
                best_shape = ""
                best_index = -1

                second_match = 0
                second_shape = ""
                second_index = -1

                //now let's do it again ... with style
                //i.e. let's do it again, but with actual calls to compare shape
                /*
                for (i=0; i<ALL_LETTERS_KEYS.length; i++){
                  matchPerc = compareShape(jsontext, ALL_LETTERS[i]);
                  if (matchPerc > best_match){
                    second_match = best_match
                    second_shape = best_shape
                    second_index = best_index

                    best_match = matchPerc
                    best_shape = ALL_LETTERS[i]
                    best_index = i
                  } else if (matchPerc > second_match){
                    second_match = matchPerc
                    second_shape = ALL_LETTERS[i]
                    second_index = i
                  }
                }

                percent = matchPerc
                percentStr = percent + "%"

                //update the fields
                $("#result_1").text(percentStr);
                $("#res_text_1").html(ALL_LETTERS_KEYS[best_index]);
                */
                
              });

          //set up buttons
          $('#demo_1_clear_button').click(function(){
            sketchpad_editor_obj_1.clear()
            $("#demo_1_res_text_1").html("");
            $("#demo_1_res_text_2").html("");
          });

 

      }//end initDemo1

      /////////////////////
      // Demo 2 - draw the letter
      /////////////////////
      function initDemo2(){
          //initialize editor 2
          var sketchpad_editor_obj_2= Raphael.sketchpad("demo_2_sketchpad_editor", {
              width: 200,
              height: 200,
              editing: true // default
          });

          var demo_2_letter = "Q";
          var demo_2_letter_shape = '';

          function newLetter(){
            //make the list of letters
            items = ["a", "b", "c", "d", "e", 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z']
            var item = items[Math.floor(Math.random()*items.length)];
            //randomly determine if we want an uppercase or lowercase letter
            toUp = (Math.floor(Math.random() *2)%2==0)?true:false;
            //change it to uppercase if we need to, and store it
            if(toUp==true){
              item= item.toUpperCase()
              demo_2_letter = item
              demo_2_letter_shape = UPPERCASE_LETTERS[UPPERCASE_KEYS.indexOf(item)]
            } else {
              demo_2_letter = item
              demo_2_letter_shape = LOWERCASE_LETTERS[LOWERCASE_KEYS.indexOf(item)]
            }
            //return the string version of the letter
            return item
          }

          //set up the sketchpade for changes
          sketchpad_editor_obj_2.change(function() {
                //generate a random percent based on the json data
                jsontext = sketchpad_editor_obj_2.json();
                rand = Math.random(jsontext);
                percent = Math.round(rand*10000)/100

                //eventually the call will be something like:
                //percent = sketchy.compareShape(jsontext, someLetter)
                percentStr = percent +"%"

                //check for empty sketchpad
                if (jsontext == "[]"){
                  percentStr = ""
                  //randInd = 0
                }

                //display updated result
                $("#demo_2_result").text(percentStr);

                if(percent > 70){
                  $("#demo_2_accuracy").css("background-color", "#75FF75");
                } else if (percent > 40){
                  $("#demo_2_accuracy").css("background-color", "#FFAD5C");
                } else {
                  $("#demo_2_accuracy").css("background-color", "#FF3333");

                }

                //$("#res_text_1").html(results[randInd]);
              });

          //set up buttons
          $('#demo_2_clear_button').click(function(){
            sketchpad_editor_obj_2.clear();
            $("#demo_2_accuracy").css("background-color", "#ffffff");
          });
          $('#demo_2_new_letter_button').click(function(){             
            $("#demo_2_text").html(newLetter());
            sketchpad_editor_obj_2.clear();
            $("#demo_2_accuracy").css("background-color", "#ffffff");

          });
          $("#demo_2_done_button").click(function(){
            $("#demo_2_text").html(newLetter());
            sketchpad_editor_obj_2.clear();
            $("#demo_2_accuracy").css("background-color", "#ffffff");

          });

      }//end initDemo2


      /////////////////////
      // Demo 3 - solve maths
      /////////////////////
      function initDemo3(){
          //initialize editor 3
          var demo_3_sketchpad_editor_obj= Raphael.sketchpad("demo_3_sketchpad", {
              width: 150,
              height: 150,
              editing: true // default
          });

          //get a new eq right away
          setEquation(newEquation());

          //start answer out as hidden
          $('#demo_3_answer').hide();

          //set some threshold to determine whether they drew the right number
          var accuracy_threshold = 50; //50%

          //store the active equation somewhere
          var demo_3_eq = ''


          //generate a new, random equation
          //this method recursively calls itself until we get a valid one
          function newEquation(){
            //get random operator
            ops = ["+", "-", "×", "÷"] //could add * and /
            op = ops[Math.floor(Math.random()*ops.length)];

            //get two random operands
            opers = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];
            oper1 = opers[Math.floor(Math.random()*opers.length)];
            oper2 = opers[Math.floor(Math.random()*opers.length)];

            //pick which element to solve for (0-3)
            solve = Math.floor(Math.random()*4);

            var res;
            //solve the equation
            if (op == "+"){
              res = oper1 + oper2;
            } else if (op == "-"){
            } else if (op == "×"){
              res = oper1 * oper2;
            } else if(op == "÷"){
              res = oper1/oper2;
            }

            //make a neat little object to return
            eq = new Object();
            eq.op = op;
            eq.oper1 = oper1;
            eq.oper2 = oper2;
            eq.res = res;
            eq.solve = solve;
            console.log("eq: " + oper1 + " " + op + " " + oper2 + " = " + res + ", solve for: " + solve)

            //keep generating equations until we have one that's allowed
            while (validateEq(eq) == false){
              eq = newEquation();
              demo_3_eq = eq;
            }

            return eq;
          }

          //decide what we want to allow in our equation
          //ex: negative numbers? 2 digit numbers? 
          function validateEq(eq){
            op = eq.op;
            oper1 = eq.oper1;
            oper2 = eq.oper2;
            res = eq.res;

            //only single digit numbers
            if (oper1>9 || oper2>9 || res>9 || oper1<0 || oper2<0 || res<0){
              return false;
            }

            //eliminate decimals
            if( !(res==0 || res==1 || res==2 || res==3 || res==4 || res==5 || res==6 || res==7 || res==8 || res==9) ){
              return false;
            }

            //0 / x = 0 (this is just silly)
            if (op == "÷" && oper1==0){
              return false;
            }

            //make sure we can definitively solve it
            //0 * x = 0 (can't solve for x)
            //x * 0 = 0 (can't solve for x)
            if (op == "×" && ((oper1==0 && solve==2) || (oper2==0 && solve==0)) ){
              return false;
            }


            //check for an ambiguous operation
            // 2 __ 2  = 4  //is it + or is it *?
            // if 2+2==2*2 or 2+2==2/2 .... etc
            if(solve==1 && (oper1+oper2==oper1-oper2 || oper1+oper2==oper1*oper2 || oper1+oper2==oper1/oper2 || oper1-oper2==oper1*oper2 || oper1-oper2==oper1/oper2 || oper1*oper2==oper1/oper2) ){
              return false;
            }


            //move along, nothing to see here
            return true;
          }

          //applies the equation object to the 4 related divs
          function setEquation(eq){
            op = eq.op;
            oper1 = eq.oper1;
            oper2 = eq.oper2;
            res = eq.res;
            solve = eq.solve;

            //put the text where it belongs
            $('#demo_3_operand_1').text(oper1);
            $('#demo_3_operand_2').text(oper2);
            $('#demo_3_operator').text(op);
            $('#demo_3_result').text(res);


            //hide the proper operand/operator
            if (solve == 0 ){
              $('#demo_3_operand_1').text("_");
              //$("#demo_3_sketchpad").appendTo('#demo_3_operand_1');
            } else if(solve == 1){
              $('#demo_3_operator').text("_");
              //$("#demo_3_sketchpad").appendTo('#demo_3_operator');
            } else if(solve == 2){
              $('#demo_3_operand_2').text("_");
              //$("#demo_3_sketchpad").appendTo('#demo_3_operand_2');
            } else if(solve == 3){
              $('#demo_3_result').text("_");
              //$("#demo_3_sketchpad").appendTo('#demo_3_result');
            }

          }

          //compare the drawing in the box to the actual answer
          function checkAnswer(){
            //compare their drawing to every number
            jsontext = demo_3_sketchpad_editor_obj.json();

            //figure out which part we care about
            solve = demo_3_eq.solve

            //get the right shape from the dataset
            var some_number_shape = '';
            matchStr = ""
            if (solve == 0 ){
              some_number_shape = NUMBERS[NUMBERS_KEYS.indexOf(demo_3_eq.oper1)];
              matchStr = demo_3_eq.oper1
            } else if(solve == 1){

              some_number_shape = OPERATIONS[OPERATIONS_KEYS.indexOf(demo_3_eq.op)];
              matchStr = demo_3_eq.op             
            } else if(solve == 2){
              some_number_shape = NUMBERS[NUMBERS_KEYS.indexOf(demo_3_eq.oper2)];
              matchStr = demo_3_eq.oper2 
            } else if(solve == 3){
              some_number_shape = NUMBERS[NUMBERS_KEYS.indexOf(demo_3_eq.res)];
              matchStr = demo_3_eq.res
            }


            //get a random percent
            rand = Math.random(jsontext);
            percent = Math.round(rand*10000)/100

            //eventually ... compare them
            //percent = compareShape(jsontext, some_number_shape)

            console.log("The answer had the following accuracy: " + percent + "\tTrying to match to: " + matchStr)
            if(percent > accuracy_threshold){
              setAnswer(true);
            } else {
              setAnswer(false);
            }
          }

          //used to set the "answer" box
          //input is either true or false
          function setAnswer(res){
            if (res == true){
              //eq has been correctly solved
              $("#demo_3_answer").css("background-color", "#75FF75");
              $("#demo_3_answer").text("Correct!");
              $("#demo_3_answer").slideDown('slow');

            } else {
              //eq has been incorrectly answered
              $("#demo_3_answer").css("background-color", "#FF3333");
              $("#demo_3_answer").text("Incorrect.");
              $("#demo_3_answer").slideDown('slow');

            }
          }

          //just clear the answer box thing
          function clearAnswer(){
              $("#demo_3_answer").slideUp();
              $("#demo_3_answer").css("background-color", "#FFFFFF");
              $("#demo_3_answer").text("");
          }

          //handle changes to the drawing
          demo_3_sketchpad_editor_obj.change(function() {
              jsontext = demo_3_sketchpad_editor_obj.json();

              //compare their drawing to every number

              //if we find a number that matches, above the threshold
              //set the answer
            });

          //set up buttons
          $('#demo_3_clear_button').click(function(){
            demo_3_sketchpad_editor_obj.clear();
            clearAnswer();
          });
          $('#demo_3_new_button').click(function(){             
            demo_3_sketchpad_editor_obj.clear();
            clearAnswer();
            setEquation(newEquation());

          });
          $("#demo_3_done_button").click(function(){
            checkAnswer();
            //setAnswer(true);
            //demo_3_sketchpad_editor_obj.clear();

          });

      }//end initDemo3


      /////////////////////
      // Demo 4 - compare two sketches
      /////////////////////
      function initDemo4(){
          //initialize editor 3
          var demo_4_sketchpad_editor_obj_1= Raphael.sketchpad("demo_4_sketchpad_1", {
              width: 200,
              height: 200,
              editing: true // default
          });

          var demo_4_sketchpad_editor_obj_2= Raphael.sketchpad("demo_4_sketchpad_2", {
              width: 200,
              height: 200,
              editing: true // default
          });

          var demo_4_json_1 = ""
          var demo_4_json_2 = ""

          //method to actually do the comparison and update the result box thing
          function updateSimilarity(){
                //get a random number using the json text as a seed
                rand = Math.random(demo_4_json_1+demo_4_json_2);
                percent = Math.round(rand*10000)/100

                //eventually, this is all we'll need
                //percent = sketchy.compareShape(demo_4_json_1, demo_4_json_2);
                percentStr = percent +"%"

                //check for empty sketchpads
                if (demo_4_json_1 == "[]" || demo_4_json_2 == "[]" ){
                  percentStr = ""
                }
                $("#demo_4_results_text").text(percentStr);
                //$("#res_text_1").html(results[randInd]);

                if(percent > 70){
                  $("#demo_4_results").css("background-color", "#75FF75");
                } else if (percent > 40){
                  $("#demo_4_results").css("background-color", "#FFAD5C");
                } else {
                  $("#demo_4_results").css("background-color", "#FF3333");

                }
        }//end updateSimilarity

        //set up the sketchpads to handle change
        demo_4_sketchpad_editor_obj_1.change(function() {
                //generate a random percent based on the json data
                demo_4_json_1 = demo_4_sketchpad_editor_obj_1.json();
                updateSimilarity();

          });

        //nobody REALLY likes change
        demo_4_sketchpad_editor_obj_2.change(function() {
                //generate a random percent based on the json data
                demo_4_json_2 = demo_4_sketchpad_editor_obj_2.json();
                updateSimilarity();

          });

        //initialize button
        $("#demo_4_clear_button").click(function(){
          demo_4_sketchpad_editor_obj_1.clear();
          demo_4_sketchpad_editor_obj_2.clear();
          $("#demo_4_results").css("background-color", "#ffffff");

        });


      }//end initDemo4
</script>
<title>Sketchy.js</title>
</head>

<body>



  <!-- HEADER -->
  <div id="header_wrap" class="outer">
    <header class="inner">
      <a id="forkme_banner" href="">View on GitHub</a>

      <div class="align_middle">
        <h1 id="project_title">Sketchy.js</h1>
        <h2 id="project_tagline">Our tagline</h2>
      </div>

      <section id="downloads">
        <a class="zip_download_link" href="">Download this project as a .zip file</a>
        <a class="tar_download_link" href="">Download this project as a tar.gz file</a>
      </section>
    </header>
  </div>

  <!-- MAIN CONTENT -->
  <div id="main_content_wrap" class="outer">
    <section id="main_content" class="inner">
      <div class="align_middle">
       <h3>Welcome to Sketchy.js.</h3>
       <p>Here is some information about Sketchy.js.  It can be used to cure cancer.  Simply by reconfiguring the protons in magnets, the scientists behind Sketchy.js were able to compute the angular velocity of dinosaurs as they cross the Baltic Sea.</p>
       
       <p>Initially, the flavor of mustard was similar to that of magic potatoes.  If a tree falls in the forest, and nobody is there to hear it, does it make a noise?  Also, has anyone really been far even as decided to use even go want to do look more like?</p>

       <p>Check out these demos below:</p>

     </div>

     <div class="demo_wrap">
      <div class="tab_wrap">

        <div class="tab" id="tab_4">Compare Two Sketches</div>
        <div class="tab" id="tab_2">Learn the Alphabet</div>
        <div class="tab" id="tab_3">Solve the Equation</div>
        <div class="tab" id="tab_1">Character Recognition</div>
        
      </div>
      <div class="clear"></div>
      <div class="demo" id="demo_1">
        <p>Draw a letter in the box below and we'll tell you what it is!</p>
        <div>Draw here:</div>
        <div id="demo_1_sketchpad_editor" class="sketchpad"></div>
        <div class="result_box">
          <div>Best Result:&nbsp; &nbsp;<span id="demo_1_res_text_1"></span></div>
          <div>Similarity:&nbsp; &nbsp;<span id="demo_1_result_1" class="match_result"></span></div>
          <br/>
          <div>Next Best Result:&nbsp; &nbsp;<span id="demo_1_res_text_2"></span></div>
          <div>Similarity:&nbsp; &nbsp;<span id="demo_1_result_2" class="match_result"></span></div>
        </div>
        <div class="clear"></div>
        <div class="clear_button button" id="demo_1_clear_button">Clear</div>

        

        <div class="clear"></div>
      </div>

      <div class="demo" id="demo_2">
        <p>Sketchy.js can be used to teach people the alphabet</p>
        <div id="demo_2_directions">Draw the letter: <b><span id="demo_2_text">Q</span></b></div>

        <div class="new_letter_button button" id="demo_2_new_letter_button">New Letter</div>  
        <div id="demo_2_sketchpad_editor" class="sketchpad"></div>
        
        <div class="clear"></div>
        <!--<div class="done_button button" id="demo_2_done_button">Done</div>-->
        <div class="clear_button button" id="demo_2_clear_button">Clear</div>
        <div id="demo_2_accuracy" class="accuracy_box">Accuracy:&nbsp; &nbsp;<span id="demo_2_result" class="match_result"></span></div>
        <div class="clear"></div>
        


      </div>

      <div class="demo" id="demo_3">
        <p>Use Sketchy.js to help teach future nerds how to do math stuffs</p>
        <p>Complete the equation:</p>
        <div id="demo_3_eq"><div id="demo_3_operand_1">1</div><div id="demo_3_operator">+</div><div id="demo_3_operand_2">2</div><div>=</div><div id="demo_3_result">_</div></div>

        <div class="clear"></div>
        <div id="demo_3_sketchpad" class="sketchpad"></div>

        
        <div class="button_wrap" id="demo_3_button_wrap">
          <div class="new_eq_button button" id="demo_3_new_button">New Equation</div> 
          <div class="done_button button" id="demo_3_done_button">Submit</div>
          <div class="clear_button button" id="demo_3_clear_button">Clear</div>

          
        </div>

        <div class="clear"></div>
        <div id="demo_3_answer"></div>
      </div>

      <div class="demo" id="demo_4">
        <p>This is a simple example to compare two sketches</p>

        <div id="demo_4_content_wrap">
          <div id="demo_4_sketchpad_1" class="sketchpad"></div>
          <div id="demo_4_middle_col">
            <div id="demo_4_results">
              <!--<div class="compare_button button" id="demo_4_compare_button">Compare</div>-->
              Similarity: <span id="demo_4_results_text"></span>

            </div>
            <div class="clear_button button" id="demo_4_clear_button">Clear Both</div>
          </div>
          <div id="demo_4_sketchpad_2" class="sketchpad"></div>

        </div>

        <div class="clear"></div>


      </div>

    </div>

  </section>
</div>

<!-- FOOTER  -->
<div id="footer_wrap" class="outer">
  <footer class="inner">
    <p class="copyright">Sketchy.js maintained by <a href="">ffff</a></p>
    <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
  </footer>
</div>



</body>
</html>

